<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Primary Meta Tags -->
    <title>Woof - Social Network for Dogs & Pets | Share Your Pet's Adventures</title>
    <meta name="title" content="Woof - Social Network for Dogs & Pets | Share Your Pet's Adventures">
    <meta name="description" content="Join Woof, the social network where dogs connect! Share adorable pet photos, discover local dog friends, explore dog-friendly places, and build your pet's social circle. Instagram for dogs.">
    <meta name="keywords" content="dog social network, pet instagram, dog photos, pet community, dog friends, puppy social media, dog profile, pet sharing">
    <meta name="author" content="Woof">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://woofapp.fi/">
    <meta property="og:title" content="Woof - Social Network for Dogs & Pets">
    <meta property="og:description" content="Join Woof, the social network where dogs connect! Share adorable pet photos, discover local dog friends, and build your pet's social circle.">
    <meta property="og:image" content="https://woofapp.fi/assets/images/logo.png">

    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon.png">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet" />

    <!-- Stylesheets -->
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
</head>
<body>
    <div class="app-container">
        <header>
            <div class="header-content">
                <a href="/" data-link class="logo">
                    <img src="/assets/images/logo.png" alt="Woof Logo">
                </a>
                <div class="header-icons">
                    <a href="#" id="desktop-search-button" aria-label="Search"><i class="fas fa-search"></i></a>
                    <a href="#" class="auth-link" aria-label="Login">Login</a>
                </div>
            </div>
        </header>

        <div class="main-container">
            <nav class="left-panel">
                <ul id="nav-links">
                    <li><a href="/" data-link><i class="fas fa-home"></i> Home</a></li>
                    <li><a href="#" id="create-post-link"><i class="fas fa-plus-square"></i> Create</a></li>
                    <li id="messages-nav-item" style="display: none;">
                        <a href="/messages" data-link><i class="fas fa-envelope"></i> Messages <span class="nav-badge" id="messages-badge" style="display: none;">0</span></a>
                    </li>
                    <li id="profile-nav-item">
                        <!-- Profile link will be rendered dynamically based on auth state -->
                    </li>
                </ul>
            </nav>

            <!-- SPA Content Container -->
            <div id="app" class="content">
                <!-- Views will be rendered here by ViewManager -->
                <div class="post-skeleton" aria-hidden="true">
                    <div class="post-header-skeleton">
                        <div class="skeleton skeleton-circle"></div>
                        <div class="skeleton skeleton-text"></div>
                    </div>
                    <div class="skeleton skeleton-image"></div>
                    <div class="post-actions-skeleton">
                        <div class="skeleton skeleton-text"></div>
                    </div>
                </div>
                <div class="post-skeleton" aria-hidden="true">
                    <div class="post-header-skeleton">
                        <div class="skeleton skeleton-circle"></div>
                        <div class="skeleton skeleton-text"></div>
                    </div>
                    <div class="skeleton skeleton-image"></div>
                    <div class="post-actions-skeleton">
                        <div class="skeleton skeleton-text"></div>
                    </div>
                </div>
                <div class="post-skeleton" aria-hidden="true">
                    <div class="post-header-skeleton">
                        <div class="skeleton skeleton-circle"></div>
                        <div class="skeleton skeleton-text"></div>
                    </div>
                    <div class="skeleton skeleton-image"></div>
                    <div class="post-actions-skeleton">
                        <div class="skeleton skeleton-text"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile Bottom Navigation -->
    <nav class="bottom-nav" aria-label="Mobile navigation">
        <a href="/" data-link id="bottom-nav-home" class="bottom-nav-item active">
            <i class="fas fa-home"></i>
        </a>
        <a href="#" id="bottom-nav-search" class="bottom-nav-item">
            <i class="fas fa-search"></i>
        </a>
        <a href="#" id="create-post-link-mobile" class="bottom-nav-item">
            <i class="fas fa-plus-square"></i>
        </a>
        <a href="/messages" data-link id="bottom-nav-messages" class="bottom-nav-item" style="display: none;">
            <i class="fas fa-envelope"></i>
            <span class="bottom-nav-badge" id="bottom-messages-badge" style="display: none;">0</span>
        </a>
        <a href="#" id="bottom-nav-profile" class="bottom-nav-item">
            <i class="fas fa-user-circle"></i>
        </a>
    </nav>

    <!-- Search Panel -->
    <div id="search-panel" class="search-panel">
        <div class="search-bar">
            <div class="search-input-wrapper">
                <i class="fas fa-search search-input-icon"></i>
                <input type="text" id="mobile-search-input" placeholder="Search" autocomplete="off">
            </div>
            <button class="close-search" aria-label="Close search">Cancel</button>
        </div>
        <ul id="search-results" class="search-results"></ul>
    </div>

    <!-- Create Post Modal -->
    <div id="create-post-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Create Post</h2>
                <button class="modal-close" aria-label="Close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="create-post-form" novalidate>
                    <div class="form-group">
                        <label for="post-dog-select">Select Dog</label>
                        <select id="post-dog-select" name="post-dog-select" required>
                            <option value="">Choose a dog...</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Image</label>
                        <div class="image-source-buttons">
                            <button type="button" id="post-image-camera" class="btn-secondary image-source-btn">
                                <i class="fas fa-camera"></i> Take Photo
                            </button>
                            <button type="button" id="post-image-gallery" class="btn-secondary image-source-btn">
                                <i class="fas fa-images"></i> Gallery
                            </button>
                        </div>
                        <input type="file" id="post-image" name="post-image" accept="image/*" capture="environment" style="display:none">
                        <input type="file" id="post-image-gallery-input" accept="image/*" style="display:none">
                        <div id="image-preview" class="image-preview"></div>
                    </div>
                    <div class="form-group">
                        <label for="post-caption">Caption (optional)</label>
                        <textarea id="post-caption" name="post-caption" rows="3" maxlength="500"></textarea>
                    </div>
                    <button type="submit" class="btn-primary">Post</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Auth Modal -->
    <div id="auth-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="auth-modal-title">Login</h2>
                <button class="modal-close" aria-label="Close">&times;</button>
            </div>
            <div class="modal-body">
                <div id="auth-tabs" class="auth-tabs">
                    <button class="auth-tab active" data-tab="login">Login</button>
                    <button class="auth-tab" data-tab="register">Register</button>
                </div>
                <form id="auth-form">
                    <div class="form-group" id="auth-email-group">
                        <label for="auth-email">Email</label>
                        <input type="email" id="auth-email" required>
                    </div>
                    <div class="form-group" id="auth-password-group">
                        <label for="auth-password">Password</label>
                        <input type="password" id="auth-password" required>
                        <ul id="password-requirements" class="password-requirements" style="display: none;" aria-live="polite">
                            <li id="req-length">At least 8 characters</li>
                            <li id="req-uppercase">An uppercase letter</li>
                            <li id="req-lowercase">A lowercase letter</li>
                            <li id="req-number">A number</li>
                            <li id="req-symbol">A special character</li>
                        </ul>
                    </div>
                    <div class="form-group" id="auth-name-group" style="display: none;">
                        <label for="auth-name">Name</label>
                        <input type="text" id="auth-name">
                    </div>
                    <div class="form-group" id="auth-verify-group" style="display: none;">
                        <label for="auth-verify-code">Verification Code</label>
                        <input type="text" id="auth-verify-code" placeholder="Enter 6-digit code" maxlength="6" inputmode="numeric" autocomplete="one-time-code">
                    </div>
                    <div class="form-group" id="auth-new-password-group" style="display: none;">
                        <label for="auth-new-password">New Password</label>
                        <input type="password" id="auth-new-password">
                        <ul id="new-password-requirements" class="password-requirements" aria-live="polite">
                            <li id="new-req-length">At least 8 characters</li>
                            <li id="new-req-uppercase">An uppercase letter</li>
                            <li id="new-req-lowercase">A lowercase letter</li>
                            <li id="new-req-number">A number</li>
                            <li id="new-req-symbol">A special character</li>
                        </ul>
                    </div>
                    <button type="submit" class="btn-primary" id="auth-submit">Sign In</button>
                    <p id="auth-forgot-link" class="auth-secondary-action" style="display: none;">
                        <a href="#" id="forgot-password-btn">Forgot password?</a>
                    </p>
                    <p id="auth-resend-group" class="auth-secondary-action" style="display: none;">
                        <a href="#" id="resend-code-btn">Resend verification code</a>
                    </p>
                    <p id="auth-back-group" class="auth-secondary-action" style="display: none;">
                        <a href="#" id="back-to-login-btn">&larr; Back to login</a>
                    </p>
                </form>
            </div>
        </div>
    </div>

    <!-- Create Dog Modal -->
    <div id="create-dog-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add a Pet</h2>
                <button class="modal-close" aria-label="Close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="create-dog-form">
                    <div class="form-group">
                        <label for="dog-name">Name *</label>
                        <input type="text" id="dog-name" required maxlength="50" placeholder="e.g., Nelli">
                    </div>
                    <div class="form-group">
                        <label for="dog-breed">Breed *</label>
                        <input type="text" id="dog-breed" required maxlength="50" placeholder="e.g., Finnish Lapphund">
                    </div>
                    <div class="form-group">
                        <label for="dog-age">Age *</label>
                        <input type="number" id="dog-age" required min="0" max="30" step="1">
                    </div>
                    <div class="form-group">
                        <label for="dog-location">Location (optional)</label>
                        <input type="text" id="dog-location" maxlength="100" placeholder="e.g., Helsinki, Finland">
                    </div>
                    <div class="form-group">
                        <label for="dog-bio">Bio (optional)</label>
                        <textarea id="dog-bio" rows="3" maxlength="500" placeholder="Tell us about your dog..."></textarea>
                    </div>
                    <div class="form-group">
                        <label for="dog-photo">Profile Photo *</label>
                        <input type="file" id="dog-photo" accept="image/*" required>
                        <small class="form-hint">Square photos work best</small>
                        <div id="dog-photo-preview" class="image-preview"></div>
                    </div>
                    <button type="submit" class="btn-primary">Add Pet</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Edit Dog Modal -->
    <div id="edit-dog-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Edit Profile</h2>
                <button class="modal-close" aria-label="Close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="edit-dog-form">
                    <input type="hidden" id="edit-dog-id">
                    <div class="form-group">
                        <label for="edit-dog-name">Name *</label>
                        <input type="text" id="edit-dog-name" required maxlength="50">
                    </div>
                    <div class="form-group">
                        <label for="edit-dog-breed">Breed *</label>
                        <input type="text" id="edit-dog-breed" required maxlength="50">
                    </div>
                    <div class="form-group">
                        <label for="edit-dog-age">Age *</label>
                        <input type="number" id="edit-dog-age" required min="0" max="30" step="1">
                    </div>
                    <div class="form-group">
                        <label for="edit-dog-location">Location</label>
                        <input type="text" id="edit-dog-location" maxlength="100" placeholder="e.g., Helsinki, Finland">
                    </div>
                    <div class="form-group">
                        <label for="edit-dog-bio">Bio</label>
                        <textarea id="edit-dog-bio" rows="3" maxlength="500" placeholder="Tell us about your dog..."></textarea>
                    </div>
                    <div class="form-group">
                        <label for="edit-dog-photo">Change Profile Photo</label>
                        <input type="file" id="edit-dog-photo" accept="image/*">
                        <div id="edit-dog-photo-preview" class="image-preview"></div>
                    </div>
                    <button type="submit" class="btn-primary">Save Changes</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Health Record Modal -->
    <div id="health-record-modal" class="modal" style="display: none;">
        <div class="modal-content health-modal-content">
            <div class="modal-header">
                <h2 id="health-modal-title">Add Health Record</h2>
                <button class="modal-close" aria-label="Close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="health-type-tabs" id="health-type-tabs">
                    <button type="button" class="health-type-tab active" data-type="vet_visit"><i class="fas fa-stethoscope"></i> Vet Visit</button>
                    <button type="button" class="health-type-tab" data-type="vaccination"><i class="fas fa-syringe"></i> Vaccination</button>
                    <button type="button" class="health-type-tab" data-type="medication"><i class="fas fa-pills"></i> Medication</button>
                    <button type="button" class="health-type-tab" data-type="weight"><i class="fas fa-weight"></i> Weight</button>
                    <button type="button" class="health-type-tab" data-type="note"><i class="fas fa-sticky-note"></i> Note</button>
                </div>
                <form id="health-record-form">
                    <input type="hidden" id="health-record-type" value="vet_visit">
                    <div class="health-form-fields">
                        <div class="form-row">
                            <div class="form-group form-group-flex">
                                <label for="health-record-date">Date *</label>
                                <input type="date" id="health-record-date" required>
                            </div>
                            <div class="form-group form-group-flex" id="health-record-value-group" style="display: none;">
                                <label for="health-record-value">Weight (kg) *</label>
                                <input type="number" id="health-record-value" min="0.1" max="200" step="0.1" placeholder="e.g., 25.5">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="health-record-description" id="health-desc-label">Description *</label>
                            <input type="text" id="health-record-description" required maxlength="1000" placeholder="e.g., Annual check-up">
                        </div>
                        <div class="form-group">
                            <label for="health-record-notes">Notes (optional)</label>
                            <textarea id="health-record-notes" rows="3" maxlength="2000" placeholder="Additional details..."></textarea>
                        </div>
                    </div>
                    <div class="health-modal-actions">
                        <button type="button" class="btn-secondary health-cancel-btn">Cancel</button>
                        <button type="submit" class="btn-primary" id="health-submit-btn">Add Record</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Main App Script - SPA Version -->
    <script type="module" src="/js/app-spa.js"></script>
</body>
</html>
